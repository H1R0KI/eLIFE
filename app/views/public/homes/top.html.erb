<div class="text-center py-3 mb-5", style="background-color: #DDFFDD;">
  <p class="h1 font-weight-lighter font-italic display-2">Let's enjoy life!</p>
  <p class="text-secondary">eLIFEは、生活の中でのライフハックや便利アイテムを共有するためのサービスです。</p>
</div>

<div class="container pt-2 pb-3 px-sm-0">
  <div class="row">
    <div class="col-4 pt-4">
      <% if member_signed_in? %>
        <% if current_member.name == "ゲスト" %>
          <div class="border border-success rounded p-3">
            <p class="text-center pt-3">ゲストログイン中</p>
            <p class="text-center"><%= image_tag current_member.get_profile_image, class: "rounded-circle", size:"80x80"%></p>
            <p class="text-center">
              全ての機能をご利用するには</br>
              新規登録、またはログインが必要です。
            </p>
          </div>
        <% else %>
          <%= render 'my_profile' %>
        <% end %>
      <% else %>
        <%= render 'login_area' %>
      <% end %>
      <div class="pt-2 mt-5">
        <div class="text-center h5 border-bottom border-dark pb-2 mb-4">
          <strong>月間投稿数ランキングTOP5</strong>
        </div>
        <% @month_member_post_ranks.each.with_index(1) do |member, i| %>
          <table class="table table-borderless">
            <tr class="border-bottom">
              <td style="width: 45%">
                <div class="text-center h5">第<%= i %>位</div>
                <div class="text-center">投稿数：<strong><%= member.posts.where(created_at: Time.current.all_month).count %></strong>件</div>
              </td>
              <td class="align-middle">
                <%= image_tag member.get_profile_image, class: "rounded-circle", size:"30x30"%>
                <%= link_to member.name, member_path(member.id), class: "text-dark" %>
              </td>
            </tr>
          </table>
        <% end %>
      </div>
    </div >

    <div class="col-1"></div>

    <div class="col-7">
      <div class="text-center h4 border-bottom border-dark pb-2 mb-5">
        <strong>週間イイね<i class="far fa-thumbs-up"></i>数ランキングTOP5</strong>
      </div>
      <% @week_post_favorite_ranks.each.with_index(1) do |post, i| %>
        <span class="h4 pr-5">第<%= i %>位</span>週間カウント：
        <strong><%= post.favorites.where(created_at: Time.current.all_week).count %></strong>イイね！
        <div class="card-deck mt-2 mb-5">
          <div class="card">
            <div class="card-body", style="background-color: #f5f5f5;">
              <div id="post_<%= post.id %>">
                <h5 class=""><%= link_to post.title, post_path(post.id), class: "text-dark" %></h5>
                <div class="card-text small">ジャンル：<%= post.genre_i18n %>
                  <span class="pl-5">
                    <i class="fas fa-tag"></i>
                    <% post.tags.each do |tag| %>
                      <span class="mr-1"><%= link_to tag.name, tag_posts_path(tag_id: tag.id), class: "text-dark" %></span>
                    <% end %>
                  </span>
                </div>
                <div class="card-text small pt-2">
                  <%= image_tag post.member.get_profile_image, size:"30x30" %>
                  <%= link_to post.member.name, member_path(post.member_id), class: "text-dark" %>
                  <small class="text-muted"><%= post.created_at.strftime('%Y/%m/%d %H:%M') %></small>
                  <% if post.member == current_member %>
                    &nbsp;&nbsp;<%= link_to "削除", post_path(post.id), class: "text-danger text-right", method: :delete %>
                  <% end %>
                  <div class="text-right ">
                  <% if member_signed_in? %>
                    <span class="favorite_btn">
                      <%= render 'public/favorites/favorite_btn', post: post %>
                    </span>
                    &emsp;<i class="fas fa-comment text-primary"></i> <%= post.post_comments.count %>
                  <% else %>
                    <div class="text-right ">
                      <span class="text-warning">
                        <i class="fas fa-star"></i>
                      </span>
                      <%= post.favorites.count %>
                      &emsp;<i class="fas fa-comment text-primary"></i> <%= post.post_comments.count %>
                    </div>
                  <% end %>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>