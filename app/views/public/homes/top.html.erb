<div class="container px-5 px-sm-0">
  <div class="row">
    <div class="col-4 pt-4">
      <% if member_signed_in? %>
        <div class="border rounded p-2">
          <p class="text-center pt-3"><%= image_tag current_member.get_profile_image, class: "rounded-circle", size:"80x80"%></p>
          <p class="text-center"><%= link_to current_member.name, member_path(current_member.id) %></p>
          <div class="text-center pb-3">
            <%= link_to edit_member_path(current_member.id), class: "btn btn-sm btn-secondary rounded-pill" do %>
              <i class="fas fa-user-cog"></i> 編集する
            <% end %>
          </div>
          <table class="table">
            <tr>
              <th style="width: 45%">フォロー数</th>
              <td><%= link_to current_member.followings.count, member_followings_path(current_member) %></td>
            </tr>
            <tr>
              <th>フォロワー数</th>
              <td><%= link_to current_member.followers.count, member_followers_path(current_member) %></td>
            </tr>
            <tr>
              <th>年代</th>
              <td><%= current_member.age_i18n %></td>
            </tr>
            <tr>
              <th>世帯構成</th>
              <td><%= current_member.composition_i18n %></td>
            </tr>
            <p>
              <%= current_member.introduction %>
            </p>
          </table>
        </div>
      <% else %>
        <div class="border border-success rounded p-4">
          <div class="text-center pb-2">
            こちらからお試しでご利用できます。
          </div>
          <div class="text-center pr-3 pb-3">
            <%= link_to 'ゲストログイン', members_guest_sign_in_path, class: "btn btn-secondary mb-3", method: :post %></br>
          </div>
          <div class="text-center pb-2">
            全ての機能をご利用するには</br>
            新規登録、またはログインが必要です。</br>
          </div>
          <div class="text-center pr-3">
            <%= link_to 'ログイン',new_member_session_path, class: "btn btn-info mr-4" %>
            <%= link_to '新規登録',new_member_registration_path, class: "btn btn-success" %>
          </div>
        </div>
      <% end %>
      <div class="pt-2 mt-5">
        <div class="text-center h5">
          投稿数ランキングTOP5ユーザー
        </div>
        <% @member_post_ranks.each.with_index(1) do |member, i| %>
        <table class="table">
          <tr>
            <td style="width: 20%">
              第<%= i %>位
            </td>
            <td>
              <%= image_tag member.get_profile_image, class: "rounded-circle", size:"30x30"%>
              <%= link_to member.name, member_path(member.id) %>
            </td>
          </tr>
        </table>
        <% end %>
      </div>
    </div >

    <div class="col-1"></div>

    <div class="col-7">
      <div class="text-center h4 border-bottom pb-2">
        週間いいね数ランキングTOP5
      </div>
      <% @week_post_favorite_ranks.each.with_index(1) do |post, i| %>
      </br>第<%= i %>位
        <div class="card-deck mb-1">
          <div class="card">
            <div class="card-body", style="background-color: #f5f5f5;">
              <div id="post_<%= post.id %>">
                <h5 class=""><%= link_to post.title, post_path(post.id) %></h5>
                <div class="card-text small"><i class="fas fa-folder"></i>&nbsp;<%= post.genre_i18n %></div>
                <div class="card-text small"><%= post.body.truncate(47) %></div>
                <div class="card-text small pt-2">
                  <%= image_tag post.member.get_profile_image, size:"20x20" %>
                  <%= link_to post.member.name, member_path(post.member_id) %>
                  <small class="text-muted"><%= post.created_at.strftime('%Y/%m/%d %H:%M') %></small>
                  <% if post.member == current_member %>
                    &nbsp;&nbsp;<%= link_to "削除", post_path(post.id), class: "text-danger text-right", method: :delete %>
                  <% end %>
                  <div class="text-right ">
                  <% if member_signed_in? %>
                    <span class="favorite_btn">
                      <%= render 'public/favorites/favorite_btn', post: post %>
                    </span>
                    &emsp;<i class="fas fa-comment text-primary"></i> <%= post.post_comments.count %>
                  <% else %>
                  <% end %>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>